{"ast":null,"code":"import _slicedToArray from\"/Users/sofiapeyret/Desktop/cct-eng-SofiaLara-1/itv/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useMemo,useEffect}from'react';import useProductsGet from'./hooks/useProductsGet';import useProductsPost from'./hooks/useProductsPost';import{ProductDataContext}from'./stores/useProductData';import Table from'./components/Table/Table.js';import'./App.css';//TODO: all the strings to be in a content file\n//TODO: add comments\n//TODO: unit test\n//TODO: format code\n//TODO: abstract buttons\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useProductsGet=useProductsGet(),_useProductsGet2=_slicedToArray(_useProductsGet,1),_useProductsGet2$=_useProductsGet2[0],data=_useProductsGet2$.data,isFetching=_useProductsGet2$.isFetching;var _useProductsPost=useProductsPost(),_useProductsPost2=_slicedToArray(_useProductsPost,1),_useProductsPost2$=_useProductsPost2[0],postProducts=_useProductsPost2$.postProducts,isLoading=_useProductsPost2$.isLoading;var _useState=useState(),_useState2=_slicedToArray(_useState,2),productData=_useState2[0],setProductData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalCost=_useState4[0],setTotalCost=_useState4[1];//pass the initial states of the context as value in the provider\nvar value=useMemo(function(){return{productData:productData,setProductData:setProductData,totalCost:totalCost,setTotalCost:setTotalCost};},[totalCost,productData]);//get data from initial fetch and copy it in the context store\nuseEffect(function(){if(data){setProductData(data);}},[data,setProductData]);//On click POST request with updated data from the context\nvar handlePostData=function handlePostData(e){e.preventDefault();var purchaseData={products:productData,total:totalCost};postProducts(purchaseData);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Review Your Order & Complete Checkout\"})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(ProductDataContext.Provider,{value:value,children:/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper__title\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Review Your Order\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper__content\",children:/*#__PURE__*/_jsx(Table,{isFetching:isFetching})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"buy-button\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn__submit\",onClick:handlePostData,disabled:totalCost===0||isLoading,children:isLoading?'Buying...':'Buy now'})})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useMemo","useEffect","useProductsGet","useProductsPost","ProductDataContext","Table","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_useProductsGet","_useProductsGet2","_slicedToArray","_useProductsGet2$","data","isFetching","_useProductsPost","_useProductsPost2","_useProductsPost2$","postProducts","isLoading","_useState","_useState2","productData","setProductData","_useState3","_useState4","totalCost","setTotalCost","value","handlePostData","e","preventDefault","purchaseData","products","total","children","Provider","className","onClick","disabled"],"sources":["/Users/sofiapeyret/Desktop/cct-eng-SofiaLara-1/itv/src/App.js"],"sourcesContent":["import React, { useState, useMemo, useEffect} from 'react'\nimport useProductsGet from './hooks/useProductsGet'\nimport useProductsPost from './hooks/useProductsPost'\nimport { ProductDataContext } from './stores/useProductData'\nimport Table from './components/Table/Table.js'\nimport './App.css'\n\n//TODO: all the strings to be in a content file\n//TODO: add comments\n//TODO: unit test\n//TODO: format code\n//TODO: abstract buttons\n\nfunction App() {\n  const [{ data, isFetching }] = useProductsGet()\n  const [{ postProducts, isLoading }] = useProductsPost()\n  const [productData, setProductData] = useState()\n  const [totalCost, setTotalCost] = useState(0)\n\n  //pass the initial states of the context as value in the provider\n  const value = useMemo(\n    () => ({ productData, setProductData, totalCost, setTotalCost }), \n    [totalCost, productData]\n  )\n\n  //get data from initial fetch and copy it in the context store\n  useEffect(() => {\n    if(data){\n      setProductData(data)\n    }\n  }, [data, setProductData])\n\n  //On click POST request with updated data from the context\n  const handlePostData = (e) => {\n    e.preventDefault()\n\n    const purchaseData = {\n      products: productData,\n      total: totalCost,\n    }\n\n    postProducts(purchaseData)\n  }\n\n  return (\n    <>\n      <header>\n        <h1>Review Your Order &#38; Complete Checkout</h1>\n      </header>\n      <hr />\n      <ProductDataContext.Provider value={value}>\n        <main>\n          <div className='table-wrapper'>\n            <div className='table-wrapper__title'>\n              <h2>Review Your Order</h2>\n            </div>\n            <div className='table-wrapper__content'>\n            <Table isFetching={isFetching}/>\n            </div>\n          </div>\n          <div className='buy-button'>\n            <button className='btn btn__submit' onClick={handlePostData} disabled={totalCost === 0 || isLoading}>\n              {isLoading ? 'Buying...' : 'Buy now'}\n            </button>\n          </div>\n        </main>\n      </ProductDataContext.Provider>\n    </>\n  )\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}