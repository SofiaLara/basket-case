{"ast":null,"code":"var _jsxFileName = \"/Users/sofiapeyret/Desktop/cct-eng-SofiaLara-1/itv/src/components/OrderTable/OrderTable.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { ProductDataContext } from '../../stores/useProductData';\nimport './OrderTable.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OrderTable(_ref) {\n  _s();\n  let {\n    setSubTotal\n  } = _ref;\n  const [hasChanged, setHasChanged] = useState(false);\n  const [quantity, setQuantity] = useState([]);\n  const {\n    productData,\n    setProductData\n  } = useContext(ProductDataContext);\n\n  //Initialise with default quantities\n  useEffect(() => {\n    if (productData && productData.length > 0 && !hasChanged) {\n      setQuantity(productData.map(() => 1));\n    }\n  }, [hasChanged, productData]);\n  const handleIncrease = i => {\n    setHasChanged(true);\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      newQuantities[i] += 1;\n      return newQuantities;\n    });\n    setProductData(prevData => {\n      const newData = [...prevData];\n      newData[i].quantity = quantity[i] + 1;\n      return newData;\n    });\n  };\n  const handleDecrease = i => {\n    setHasChanged(true);\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      if (newQuantities[i] > 1) {\n        newQuantities[i] -= 1;\n      }\n      return newQuantities;\n    });\n    setProductData(prevData => {\n      const newData = [...prevData];\n      newData[i].quantity = quantity[i] - 1;\n      return newData;\n    });\n  };\n\n  //deletes quantities and item from product data\n  const handleDelete = i => {\n    setHasChanged(true);\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      newQuantities.splice(i, 1);\n      return newQuantities;\n    });\n    setProductData(prevData => {\n      const newData = [...prevData];\n      newData.splice(i, 1);\n      return newData;\n    });\n  };\n  const calculateCost = (price, quantity) => {\n    return (price * quantity).toFixed(2);\n  };\n  const calculateSubTotal = useCallback(() => {\n    let total = 0;\n    if (productData && productData.length > 0) {\n      for (let i = 0; i < productData.length; i++) {\n        total += productData[i].price * quantity[i];\n      }\n      setSubTotal(parseInt(total.toFixed(2)));\n    }\n    if (quantity.length === 0) {\n      setSubTotal(0);\n    }\n  }, [productData, quantity, setSubTotal]);\n  useEffect(() => {\n    calculateSubTotal();\n  }, [calculateSubTotal, quantity]);\n  return /*#__PURE__*/_jsxDEV(\"tbody\", {\n    children: productData && productData.length > 0 && productData.map((item, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: item.product\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\"\\xA3\", item.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [quantity[i], /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"plus\",\n          onClick: () => handleIncrease(i),\n          className: \"btn btn__plus\",\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"minus\",\n          onClick: () => handleDecrease(i),\n          className: \"btn btn__minus\",\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\"\\xA3\", calculateCost(item.price, quantity[i])]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        className: \"right\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"delete\",\n          onClick: () => handleDelete(i),\n          className: \"btn btn__delete\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s(OrderTable, \"k0tJlx/98pub3As7ItDMB0Zu9FQ=\");\n_c = OrderTable;\nexport default OrderTable;\nOrderTable.propTypes = {\n  setSubTotal: PropTypes.func.isRequired\n};\nvar _c;\n$RefreshReg$(_c, \"OrderTable\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","PropTypes","ProductDataContext","jsxDEV","_jsxDEV","OrderTable","_ref","_s","setSubTotal","hasChanged","setHasChanged","quantity","setQuantity","productData","setProductData","length","map","handleIncrease","i","prevQuantities","newQuantities","prevData","newData","handleDecrease","handleDelete","splice","calculateCost","price","toFixed","calculateSubTotal","total","parseInt","children","item","product","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","className","_c","propTypes","func","isRequired","$RefreshReg$"],"sources":["/Users/sofiapeyret/Desktop/cct-eng-SofiaLara-1/itv/src/components/OrderTable/OrderTable.js"],"sourcesContent":["import React, {useState, useEffect, useCallback, useContext} from 'react'\nimport PropTypes from 'prop-types'\nimport { ProductDataContext } from '../../stores/useProductData'\nimport './OrderTable.css'\n\nfunction OrderTable({setSubTotal}) {\n  const [hasChanged, setHasChanged] = useState(false)\n  const [quantity, setQuantity] = useState([])\n  const {productData, setProductData} = useContext(ProductDataContext)\n\n  //Initialise with default quantities\n  useEffect(() => {\n    if (productData && productData.length > 0 && !hasChanged) {\n      setQuantity(productData.map(() => 1))\n    }\n  }, [hasChanged, productData])\n\n  const handleIncrease = (i) => {\n    setHasChanged(true)\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities]\n      newQuantities[i] += 1\n      return newQuantities\n    });\n    setProductData((prevData) => {\n      const newData = [...prevData]\n      newData[i].quantity = quantity[i] + 1\n      return newData\n    });\n  };\n\n  const handleDecrease = (i) => {\n    setHasChanged(true)\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities]\n      if (newQuantities[i] > 1) {\n        newQuantities[i] -= 1\n      }\n      return newQuantities\n    });\n    setProductData((prevData) => {\n      const newData = [...prevData]\n      newData[i].quantity = quantity[i] - 1\n      return newData\n    });\n  };\n\n  //deletes quantities and item from product data\n  const handleDelete = (i) => {\n    setHasChanged(true)\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities]\n      newQuantities.splice(i, 1)\n      return newQuantities\n    });\n    setProductData((prevData) => {\n      const newData = [...prevData]\n      newData.splice(i, 1)\n      return newData\n    });\n  };\n\n  const calculateCost = (price, quantity) => {\n    return (price * quantity).toFixed(2)\n  };\n\n  const calculateSubTotal = useCallback(() => {\n    let total = 0;\n\n    if (productData && productData.length > 0) {\n        for (let i = 0; i < productData.length; i++) {\n          total += productData[i].price * quantity[i]\n        }\n\n        setSubTotal(parseInt(total.toFixed(2)))\n    }\n\n    if(quantity.length === 0) {\n      setSubTotal(0)\n    }\n  }, [productData, quantity, setSubTotal]);\n\n  useEffect(() => {\n    calculateSubTotal()\n  }, [calculateSubTotal, quantity])\n\n  return (\n    <tbody>\n            {productData && productData.length > 0 && productData.map((item, i) => (\n                <tr key={i}>\n                    <td>{item.product}</td>\n                    <td>£{item.price}</td>\n                    <td>\n                        {quantity[i]}\n                        <button\n                            type=\"plus\"\n                            onClick={() => handleIncrease(i)}\n                            className='btn btn__plus'\n                        >+</button>\n                        <button\n                            type=\"minus\"\n                            onClick={() => handleDecrease(i)}\n                            className='btn btn__minus'\n                        >-</button>\n                    </td>\n                    <td>£{calculateCost(item.price, quantity[i])}</td>\n                    <td className='right'><button\n                        type=\"delete\"\n                        onClick={() => handleDelete(i)}\n                        className='btn btn__delete'\n                    >Delete</button></td>\n                </tr>\n            ))}\n    </tbody>     \n    )\n}\n\nexport default OrderTable;\n\nOrderTable.propTypes= {\n  setSubTotal: PropTypes.func.isRequired,\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}