{"ast":null,"code":"var _jsxFileName = \"/Users/sofiapeyret/Desktop/cct-eng-SofiaLara-1/itv/src/components/OrderTable/OrderTable.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useContext } from 'react';\nimport { ProductDataContext } from '../../stores/useProductData';\n\n// import Button from '../Button/Button';\nimport './OrderTable.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OrderTable(_ref) {\n  _s();\n  let {\n    data,\n    setData,\n    setCost\n  } = _ref;\n  const [hasDeleted, setHasDeleted] = useState(false);\n  const [quantity, setQuantity] = useState([]);\n  const {\n    productData\n  } = useContext(ProductDataContext);\n\n  //Initialise with default quantities\n  useEffect(() => {\n    if (data && data.length > 0 && !hasDeleted) {\n      setQuantity(data.map(() => 1));\n    }\n  }, [data, hasDeleted]);\n  const handleIncrease = i => {\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      newQuantities[i] += 1;\n      return newQuantities;\n    });\n  };\n  const handleDecrease = i => {\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      if (newQuantities[i] > 1) {\n        newQuantities[i] -= 1;\n      }\n      return newQuantities;\n    });\n  };\n\n  //deletes quantities and item from init data\n  const handleDelete = i => {\n    setHasDeleted(true);\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      newQuantities.splice(i, 1);\n      return newQuantities;\n    });\n    setData(prevData => {\n      const newData = [...prevData];\n      newData.splice(i, 1);\n      return newData;\n    });\n  };\n  const calculateCost = (price, quantity) => {\n    return (price * quantity).toFixed(2);\n  };\n  const calculateTotalCost = useCallback(() => {\n    let total = 0;\n    if (data && data.length > 0) {\n      for (let i = 0; i < data.length; i++) {\n        total += data[i].price * quantity[i];\n      }\n      setCost(total.toFixed(2));\n    }\n    if (quantity.length === 0) {\n      setCost(0);\n    }\n  }, [data, quantity, setCost]);\n  useEffect(() => {\n    calculateTotalCost();\n  }, [calculateTotalCost, quantity]);\n  return /*#__PURE__*/_jsxDEV(\"tbody\", {\n    children: productData && productData.length > 0 && productData.map((item, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: item.product\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\"\\xA3\", item.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [quantity[i], /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"plus\",\n          onClick: () => handleIncrease(i),\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"minus\",\n          onClick: () => handleDecrease(i),\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\"\\xA3\", calculateCost(item.price, quantity[i])]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"delete\",\n          onClick: () => handleDelete(i),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(OrderTable, \"Zv4otx8N84Ik4Bq/GfETZdj2k04=\");\n_c = OrderTable;\nexport default OrderTable;\nvar _c;\n$RefreshReg$(_c, \"OrderTable\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","ProductDataContext","jsxDEV","_jsxDEV","OrderTable","_ref","_s","data","setData","setCost","hasDeleted","setHasDeleted","quantity","setQuantity","productData","length","map","handleIncrease","i","prevQuantities","newQuantities","handleDecrease","handleDelete","splice","prevData","newData","calculateCost","price","toFixed","calculateTotalCost","total","children","item","product","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","_c","$RefreshReg$"],"sources":["/Users/sofiapeyret/Desktop/cct-eng-SofiaLara-1/itv/src/components/OrderTable/OrderTable.js"],"sourcesContent":["import React, {useState, useEffect, useCallback, useContext} from 'react'\nimport { ProductDataContext } from '../../stores/useProductData';\n\n// import Button from '../Button/Button';\nimport './OrderTable.css';\n\nfunction OrderTable({data, setData, setCost}) {\n  const [hasDeleted, setHasDeleted] = useState(false)\n  const [quantity, setQuantity] = useState([])\n  const {productData} = useContext(ProductDataContext)\n\n  //Initialise with default quantities\n  useEffect(() => {\n    if (data && data.length > 0 && !hasDeleted) {\n      setQuantity(data.map(() => 1));\n    }\n  }, [data, hasDeleted]);\n\n  const handleIncrease = (i) => {\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities];\n      newQuantities[i] += 1;\n      return newQuantities;\n    });\n  };\n\n  const handleDecrease = (i) => {\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities];\n      if (newQuantities[i] > 1) {\n        newQuantities[i] -= 1;\n      }\n      return newQuantities;\n    });\n  };\n\n  //deletes quantities and item from init data\n  const handleDelete = (i) => {\n    setHasDeleted(true)\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities];\n      newQuantities.splice(i, 1);\n      return newQuantities;\n    });\n    setData((prevData) => {\n      const newData = [...prevData];\n      newData.splice(i, 1);\n      return newData;\n    });\n  };\n\n  const calculateCost = (price, quantity) => {\n    return (price * quantity).toFixed(2);\n  };\n\n  const calculateTotalCost = useCallback(() => {\n    let total = 0;\n\n    if (data && data.length > 0) {\n        for (let i = 0; i < data.length; i++) {\n        total += data[i].price * quantity[i];\n        }\n        setCost(total.toFixed(2));\n    }\n\n    if(quantity.length === 0) {\n        setCost(0);\n    }\n  }, [data, quantity, setCost]);\n\n  useEffect(() => {\n    calculateTotalCost();\n  }, [calculateTotalCost, quantity]);\n\n  return (\n    <tbody>\n            {productData && productData.length > 0 && productData.map((item, i) => (\n                <tr key={i}>\n                    <td>{item.product}</td>\n                    <td>£{item.price}</td>\n                    <td>\n                        {quantity[i]}\n                        <button\n                            type=\"plus\"\n                            onClick={() => handleIncrease(i)}\n                        >+</button>\n                        <button\n                            type=\"minus\"\n                            onClick={() => handleDecrease(i)}\n                        >-</button>\n                    </td>\n                    <td>£{calculateCost(item.price, quantity[i])}</td>\n                    <td><button\n                        type=\"delete\"\n                        onClick={() => handleDelete(i)}\n                    >Delete</button></td>\n                </tr>\n            ))}\n    </tbody>     \n    )\n}\n\nexport default OrderTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}