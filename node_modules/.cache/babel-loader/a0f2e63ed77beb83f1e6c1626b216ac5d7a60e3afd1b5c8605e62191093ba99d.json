{"ast":null,"code":"var _jsxFileName = \"/Users/sofiapeyret/Desktop/cct-eng-SofiaLara-1/itv/src/components/OrderTable/OrderTable.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useContext } from 'react';\nimport { ProductDataContext } from '../../stores/useProductData';\nimport './OrderTable.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OrderTable(_ref) {\n  _s();\n  let {\n    setCost\n  } = _ref;\n  const [hasChanged, setHasChanged] = useState(false);\n  const [quantity, setQuantity] = useState([]);\n  const {\n    productData,\n    setProductData\n  } = useContext(ProductDataContext);\n\n  //Initialise with default quantities\n  useEffect(() => {\n    if (productData && productData.length > 0 && !hasChanged) {\n      setQuantity(productData.map(() => 1));\n    }\n  }, [hasChanged, productData]);\n  const handleIncrease = i => {\n    setHasChanged(true);\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      newQuantities[i] += 1;\n      return newQuantities;\n    });\n    setProductData(prevData => {\n      const newData = [...prevData];\n      console.log(quantity[i], 'nd');\n      newData[i].quantity = quantity[i] + 1;\n      return newData;\n    });\n  };\n  const handleDecrease = i => {\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      if (newQuantities[i] > 1) {\n        newQuantities[i] -= 1;\n      }\n      return newQuantities;\n    });\n  };\n\n  //deletes quantities and item from init data\n  const handleDelete = i => {\n    setHasChanged(true);\n    setQuantity(prevQuantities => {\n      const newQuantities = [...prevQuantities];\n      newQuantities.splice(i, 1);\n      return newQuantities;\n    });\n    setProductData(prevData => {\n      const newData = [...prevData];\n      newData.splice(i, 1);\n      return newData;\n    });\n  };\n  const calculateCost = (price, quantity) => {\n    return (price * quantity).toFixed(2);\n  };\n  const calculateTotalCost = useCallback(() => {\n    let total = 0;\n    if (productData && productData.length > 0) {\n      for (let i = 0; i < productData.length; i++) {\n        total += productData[i].price * quantity[i];\n      }\n      setCost(total.toFixed(2));\n    }\n    if (quantity.length === 0) {\n      setCost(0);\n    }\n  }, [productData, quantity, setCost]);\n  useEffect(() => {\n    calculateTotalCost();\n  }, [calculateTotalCost, quantity]);\n  return /*#__PURE__*/_jsxDEV(\"tbody\", {\n    children: productData && productData.length > 0 && productData.map((item, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: item.product\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\"\\xA3\", item.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [quantity[i], /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"plus\",\n          onClick: () => handleIncrease(i),\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"minus\",\n          onClick: () => handleDecrease(i),\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\"\\xA3\", calculateCost(item.price, quantity[i])]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"delete\",\n          onClick: () => handleDelete(i),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(OrderTable, \"Ho2QGNO7Ql7kqfuq5DM7VcRsnjM=\");\n_c = OrderTable;\nexport default OrderTable;\nvar _c;\n$RefreshReg$(_c, \"OrderTable\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","ProductDataContext","jsxDEV","_jsxDEV","OrderTable","_ref","_s","setCost","hasChanged","setHasChanged","quantity","setQuantity","productData","setProductData","length","map","handleIncrease","i","prevQuantities","newQuantities","prevData","newData","console","log","handleDecrease","handleDelete","splice","calculateCost","price","toFixed","calculateTotalCost","total","children","item","product","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","_c","$RefreshReg$"],"sources":["/Users/sofiapeyret/Desktop/cct-eng-SofiaLara-1/itv/src/components/OrderTable/OrderTable.js"],"sourcesContent":["import React, {useState, useEffect, useCallback, useContext} from 'react'\nimport { ProductDataContext } from '../../stores/useProductData';\nimport './OrderTable.css';\n\nfunction OrderTable({setCost}) {\n  const [hasChanged, setHasChanged] = useState(false)\n  const [quantity, setQuantity] = useState([])\n  const {productData, setProductData} = useContext(ProductDataContext)\n\n  //Initialise with default quantities\n  useEffect(() => {\n    if (productData && productData.length > 0 && !hasChanged) {\n      setQuantity(productData.map(() => 1));\n    }\n  }, [hasChanged, productData]);\n\n  const handleIncrease = (i) => {\n    setHasChanged(true)\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities];\n      newQuantities[i] += 1;\n      return newQuantities;\n    });\n    setProductData((prevData) => {\n      const newData = [...prevData]\n      console.log(quantity[i], 'nd')\n      newData[i].quantity = quantity[i] + 1\n      return newData;\n    });\n  };\n\n  const handleDecrease = (i) => {\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities];\n      if (newQuantities[i] > 1) {\n        newQuantities[i] -= 1;\n      }\n      return newQuantities;\n    });\n  };\n\n  //deletes quantities and item from init data\n  const handleDelete = (i) => {\n    setHasChanged(true)\n    setQuantity((prevQuantities) => {\n      const newQuantities = [...prevQuantities];\n      newQuantities.splice(i, 1);\n      return newQuantities;\n    });\n    setProductData((prevData) => {\n      const newData = [...prevData];\n      newData.splice(i, 1);\n      return newData;\n    });\n  };\n\n  const calculateCost = (price, quantity) => {\n    return (price * quantity).toFixed(2);\n  };\n\n  const calculateTotalCost = useCallback(() => {\n    let total = 0;\n\n    if (productData && productData.length > 0) {\n        for (let i = 0; i < productData.length; i++) {\n        total += productData[i].price * quantity[i];\n        }\n        setCost(total.toFixed(2));\n    }\n\n    if(quantity.length === 0) {\n        setCost(0);\n    }\n  }, [productData, quantity, setCost]);\n\n  useEffect(() => {\n    calculateTotalCost();\n  }, [calculateTotalCost, quantity]);\n\n  return (\n    <tbody>\n            {productData && productData.length > 0 && productData.map((item, i) => (\n                <tr key={i}>\n                    <td>{item.product}</td>\n                    <td>£{item.price}</td>\n                    <td>\n                        {quantity[i]}\n                        <button\n                            type=\"plus\"\n                            onClick={() => handleIncrease(i)}\n                        >+</button>\n                        <button\n                            type=\"minus\"\n                            onClick={() => handleDecrease(i)}\n                        >-</button>\n                    </td>\n                    <td>£{calculateCost(item.price, quantity[i])}</td>\n                    <td><button\n                        type=\"delete\"\n                        onClick={() => handleDelete(i)}\n                    >Delete</button></td>\n                </tr>\n            ))}\n    </tbody>     \n    )\n}\n\nexport default OrderTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}